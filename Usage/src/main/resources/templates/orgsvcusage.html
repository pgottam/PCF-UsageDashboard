<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>ePaaS Platform -- Org & Spaces</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="/webjars/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="/webjars/datatables/1.10.19/css/jquery.dataTables.min.css" rel="stylesheet">
</head>
<body>


<div class="container">
    <!-- Content here -->

    <h2 th:text="'Foundation: ' + ${foundation} + ' -- Service Usage -- ' + ${yearQuarter}"/>

    <h3 class="mt-3 mb-3">Orgs</h3>

    <table class="table table-striped table-bordered table-sm">
        <thead class="thead-dark">
        <tr>
            <th>Org Name</th>
            <th>Total Services</th>
            <th>Total Sis</th>
            <th>Avg SI Count</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td th:text="${orgName}">Org Name</td>
            <td th:text="${orgSvcUsage.totalSvcs}">Total Services</td>
            <td th:text="${orgSvcUsage.totalSis}">Total Sis</td>
            <td th:text="${#numbers.formatDecimal(orgSvcUsage.siDurationInSecs,2,3)}">Avg SI Count</td>
        </tr>
        </tbody>
    </table>


    <h3 class="mt-3 mb-3">Spaces</h3>

    <table id="spaceUsageTable" class="table table-striped table-bordered table-sm">
    <thead class="thead-dark">
        <tr>
            <th>Space Name </th>
            <th>Total Services</th>
            <th>Total Sis</th>
            <th>Avg SI Count</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="spaceUsageEntry: ${orgSvcUsage.siSpaceUsage}">
            <td th:text="${spaceUsageEntry.value.spaceName}">Space Name</td>
            <td th:text="${spaceUsageEntry.value.totalSvcs}">Total Services</td>
            <td th:text="${spaceUsageEntry.value.totalSis}">Total Sis</td>
            <td th:text="${#numbers.formatDecimal(spaceUsageEntry.value.siDurationInSecs,2,3)}">Avg SI Count</td>
        </tr>
        </tbody>
    </table>


    <h3 class="mt-3 mb-3">Services</h3>

    <table id="serviceInstanceTable" class="table table-striped table-bordered table-sm">
        <thead class="thead-dark">
        <tr>
            <th>Space Name </th>
            <th>Service Name </th>
            <th>Service Instance Name</th>
            <th>Avg SI Count</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="spaceUsageEntry: ${orgSvcUsage.serviceInstanceUsage}">
            <td th:text="${spaceUsageEntry.value.spaceName}">Space Name</td>
            <td th:text="${spaceUsageEntry.value.serviceName}">Service Name</td>
            <td th:text="${spaceUsageEntry.value.serviceInstanceName}">Service Instance Name</td>
            <td th:text="${#numbers.formatDecimal(spaceUsageEntry.value.durationInSecs,2,3)}">Avg SI Count</td>
        </tr>
        </tbody>
    </table>


    <button type="button" class="btn btn-primary btn-lg float-right mt-3 mb-3" onclick="window.history.back();">Back</button>

</div>

<script src="/webjars/jquery/3.3.0/jquery.min.js"></script>
<script src="/webjars/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="/webjars/datatables/1.10.19/js/jquery.dataTables.min.js"></script>
<script>
    $(document).ready(function () {
        $('#spaceUsageTable').DataTable();
        $('#serviceInstanceTable').DataTable();
        $('.dataTables_length').addClass('bs-select');
    });
</script>
</body>
</html>